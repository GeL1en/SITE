:: -----------------------------------------------------------------------------------
::   ___                     ____                             ____                  _ 
::  / _ \ _ __   ___ _ __   / ___|  ___ _ ____   _____ _ __  |  _ \ __ _ _ __   ___| |
:: | | | | '_ \ / _ \ '_ \  \___ \ / _ \ '__\ \ / / _ \ '__| | |_) / _` | '_ \ / _ \ |
:: | |_| | |_) |  __/ | | |  ___) |  __/ |   \ V /  __/ |    |  __/ (_| | | | |  __/ |
::  \___/| .__/ \___|_| |_| |____/ \___|_|    \_/ \___|_|    |_|   \__,_|_| |_|\___|_|
::       |_|
::
::                 /|  /|  -----------------------------------------------
::                 ||__||  |                                             |
::                /   O O\__      Do not edit this file, as you will     |
::               /          \        lose your edits the next time       |
::              /      \     \         the module is initialized!        |
::             /   _    \     \                                          |
::            /    |\____\     \------------------------------------------
::           /     | | | |\____/      ||
::          /       \| | | |/ |     __||
::         /  /  \   -------  |_____| ||
::        /   |   |           |       --|
::        |   |   |           |_____  --|
::        |  |_|_|_|          |     \----
::        /\                  |
::       / /\        |        /
::      / /  |       |       |
::  ___/ /   |       |       |
:: |____/    c_c_c_C/ \C_c_c_c
::
:: -----------------------------------------------------------------------------------
:: -----------------------------------------------------------------------------------
:: OPEN SERVER PANEL | COMMAND LINE INTERFACE
:: -----------------------------------------------------------------------------------
@set "ESC="
@set "OSP_DIR=E:\Server\OSPanel"
@if "off"=="on" @if not defined OSP_FIXED @if exist "%OSP_DIR%\system\bin\ansicon.exe" @set "OSP_FIXED=YES" & "%OSP_DIR%\system\bin\ansicon.exe" -p >nul 2>nul
@if exist "%OSP_DIR%\system\bin\colortest.exe" "%OSP_DIR%\system\bin\colortest.exe"
@if %ERRORLEVEL% gtr 0 @if "off"=="auto" @if /i not "%ConEmuANSI%"=="ON" @if not defined OSP_FIXED @if exist "%OSP_DIR%\system\bin\ansicon.exe" @set "OSP_FIXED=YES" & "%OSP_DIR%\system\bin\ansicon.exe" -p >nul 2>nul
@for /f "tokens=2 delims=:." %%a in ('chcp') do @set "OSP_CODEPAGE=%%a"
@call :trim %OSP_CODEPAGE% OSP_CODEPAGE
@chcp 65001 > nul
@if not exist "%OSP_DIR%\temp\OSPanel.lock" goto notrunning
:gettempname
@set "OSP_TMPVAL=~OSP_%RANDOM%%RANDOM%%RANDOM%%RANDOM%%RANDOM%.tmp"
@if exist "%OSP_DIR%\temp\%OSP_TMPVAL%" goto gettempname
@(for /f %%N in ("1") do call,) > "%OSP_DIR%\temp\%OSP_TMPVAL%"
@for %%S in ("%OSP_DIR%\temp\%OSP_TMPVAL%") do @if %%~zS==0 (set "OSP_ECHO_STATE=OFF") else (set "OSP_ECHO_STATE=ON")
@echo off
del "%OSP_DIR%\temp\%OSP_TMPVAL%"
if "%OSP_ACTIVE_ENV%"=="" set "OSP_ACTIVE_ENV=System" & set "OSP_ACTIVE_ENV_VAL=:System:"
set "OSP_PROG_LIST=curl tail fd bat getbit getparent ansicon colortest syspreptool"
for %%a in (%OSP_PROG_LIST%) do (
    if not exist "%OSP_DIR%\system\bin\%%a.exe" set "OSP_ERR_MSG=%%a.exe –Ω–µ –Ω–∞–π–¥–µ–Ω" & goto error
)
set "OSP_MODULES_LIST=MySQL-5.6 MySQL-5.7 MySQL-8.0 MySQL-8.2 Nginx-1.26 PHP-7.4 PHP-7.4-FCGI PHP-8.0 PHP-8.0-FCGI PHP-8.1 PHP-8.1-FCGI PHP-8.2 PHP-8.2-FCGI PHP-8.3 PHP-8.3-FCGI"
set "OSP_MODULES_LIST_=:%OSP_MODULES_LIST: =:%:"
set "OSP_ADDONS_LIST=NVM"
set "OSP_ADDONS_LIST_=:%OSP_ADDONS_LIST: =:%:"
call "%OSP_DIR%\system\bin\getparent.exe" >nul 2>nul
@if %ERRORLEVEL% gtr 0 set "OSP_ERR_MSG=–†–∞–±–æ—Ç–∞ –≤ PowerShell –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è" & goto error
:: -----------------------------------------------------------------------------------
:: ROUTER
:: -----------------------------------------------------------------------------------
:router
if /i "%1"=="add"         goto env_add
if /i "%1"=="addons"      goto request
if /i "%1"=="cacert"      goto cacertinit
if /i "%1"=="convert"     goto convert
if /i "%1"=="exit"        goto shutdown
if /i "%1"=="help"        goto help
if /i "%1"=="-h"          goto help
if /i "%1"=="info"        echo: & echo –¢–µ–∫—É—â–∞—è —Å—Ä–µ–¥–∞: %ESC%[36m%OSP_ACTIVE_ENV%%ESC%[0m & goto end
if /i "%1"=="init"        goto mod_cmd
if /i "%1"=="log"         goto log
if /i "%1"=="modules"     goto request
if /i "%1"=="node"        goto node
if /i "%1"=="off"         goto mod_cmd
if /i "%1"=="on"          goto mod_cmd
if /i "%1"=="project"     goto project
if /i "%1"=="projects"    goto request
if /i "%1"=="reset"       goto env_windows
if /i "%1"=="restart"     goto mod_cmd
if /i "%1"=="shell"       goto mod_shell
if /i "%1"=="status"      goto mod_cmd
if /i "%1"=="sysprep"     goto sysprep
if /i "%1"=="tasks"       goto request
if /i "%1"=="use"         goto env_set
if /i "%1"=="-v"          echo: & echo –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏: Open Server Panel v6.0.0 x64 05.05.2024 18:22:30 & goto end
if /i "%1"=="version"     echo: & echo –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏: Open Server Panel v6.0.0 x64 05.05.2024 18:22:30 & goto end
if "%1"==""               goto help
set "OSP_ERR_MSG=–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞" & goto error
:: -----------------------------------------------------------------------------------
:: LOGO
:: -----------------------------------------------------------------------------------
:logo
echo   ___                     ____                             ____                  _
echo  / _ \ _ __   ___ _ __   / ___^|  ___ _ ____   _____ _ __  ^|  _ \ __ _ _ __   ___^| ^|
echo ^| ^| ^| ^| '_ \ / _ \ '_ \  \___ \ / _ \ '__\ \ / / _ \ '__^| ^| ^|_) / _` ^| '_ \ / _ \ ^|
echo ^| ^|_^| ^| ^|_) ^|  __/ ^| ^| ^|  ___) ^|  __/ ^|   \ V /  __/ ^|    ^|  __/ (_^| ^| ^| ^| ^|  __/ ^|
echo  \___/^| .__/ \___^|_^| ^|_^| ^|____/ \___^|_^|    \_/ \___^|_^|    ^|_^|   \__,_^|_^| ^|_^|\___^|_^|
echo       ^|_^|
echo:
echo –í—ã–∑–æ–≤ —Å–ø—Ä–∞–≤–∫–∏: %ESC%[32mosp help%ESC%[0m ^| –í–µ—Ä—Å–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã: %ESC%[33m6.0.0%ESC%[0m ^| ¬© 2010-2024 ^¬´OSPanel.io^¬ª
@exit /b 0
:: -----------------------------------------------------------------------------------
:: HELP
:: -----------------------------------------------------------------------------------
:help
call :logo
echo:
echo %ESC%[33m–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:%ESC%[0m %ESC%[32mosp ^<–∫–æ–º–∞–Ω–¥–∞^> [^<–∞—Ä–≥—É–º–µ–Ω—Ç—ã^>]%ESC%[0m
echo:
echo %ESC%[33m–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ä–µ–¥–æ–π:%ESC%[0m
echo:
echo %ESC%[32madd     ^<MODULE^|ADDON^>%ESC%[0m      –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å—Ä–µ–¥—É —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å —Ç–µ–∫—É—â–µ–π —Å—Ä–µ–¥–æ–π
echo %ESC%[32minfo%ESC%[0m                        –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–π —Å—Ä–µ–¥–µ
echo %ESC%[32mproject ^<DOMAIN^>   [start]%ESC%[0m  –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–µ–¥—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –µ–≥–æ –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥
echo                             –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [start] –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
echo %ESC%[32mreset   [init]%ESC%[0m              –°–±—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ä–µ–¥—É –≤ –∫–æ–Ω—Å–æ–ª–∏ (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞ —Å–∏—Å—Ç–µ–º—ã)
echo                             –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [init] –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
echo %ESC%[32muse     ^<MODULE^|ADDON^>%ESC%[0m      –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ä–µ–¥—É —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è
echo                             –ï—Å–ª–∏ –º–æ–¥—É–ª—å –≤—ã–∫–ª—é—á–µ–Ω, —Ç–æ —Ä–∞–±–æ—Ç–∞ —Å —á–∞—Å—Ç—å—é –µ–≥–æ —É—Ç–∏–ª–∏—Ç/–∫–æ–º–∞–Ω–¥/–æ–ø–µ—Ä–∞—Ü–∏–π,
echo                             –≤–∫–ª—é—á–∞—è —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏ (–±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö), –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞!
echo:
echo %ESC%[33m–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏:%ESC%[0m
echo:
echo %ESC%[32minit    ^<MODULE^> [PROFILE]%ESC%[0m  –ü–µ—Ä–µ—á–∏—Ç–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–∫–æ–Ω—Ñ–∏–≥–∏)
echo                             –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–∫–∞–∂–∏—Ç–µ –Ω–æ–≤—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–¥—É–ª—è
echo                             –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –º–æ–¥—É–ª–µ–π –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ –∞–∫—Ç–∏–≤–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏!
echo                             –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å—Ä–µ–¥—É –º–æ–¥—É–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ (–∫–æ–º–∞–Ω–¥–∞ "use" –∏–ª–∏ "add") –µ—Å–ª–∏ –æ–Ω–∞
echo                             —Å–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–Ω–∞, –∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å!
echo %ESC%[32moff     ^<MODULE^>%ESC%[0m            –í—ã–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å
echo %ESC%[32mon      ^<MODULE^> [PROFILE]%ESC%[0m  –í–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–∫–∞–∂–∏—Ç–µ –Ω–æ–≤—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å)
echo %ESC%[32mrestart ^<MODULE^> [PROFILE]%ESC%[0m  –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–¥—É–ª—å (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–∫–∞–∂–∏—Ç–µ –Ω–æ–≤—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å)
echo %ESC%[32mshell   ^<MODULE^>%ESC%[0m            –ó–∞–ø—É—Å—Ç–∏—Ç—å shell –∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –º–æ–¥—É–ª—è (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
echo %ESC%[32mstatus  ^<MODULE^>%ESC%[0m            –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ –º–æ–¥—É–ª—è
if not exist "%OSP_DIR%\addons\NVM\nvm.exe" goto help2
echo:
echo %ESC%[33m–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Node.js:%ESC%[0m
echo:
echo %ESC%[32mnode    install ^<N^> [ARCH]%ESC%[0m  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é Node.js. –í –∫–∞—á–µ—Å—Ç–≤–µ –Ω–æ–º–µ—Ä–∞ –≤–µ—Ä—Å–∏–∏ ^<N^> –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å
echo                             –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é, "latest" –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏, –∏–ª–∏ "lts" –¥–ª—è
echo                             –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ LTS. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä [ARCH] —Ä–∞–≤–Ω—ã–º 32 –∏–ª–∏ 64 –¥–ª—è
echo                             —É—Å—Ç–∞–Ω–æ–≤–∫–∏ 32-—Ö –∏–ª–∏ 64-—Ö —Ä–∞–∑—Ä—è–¥–Ω–æ–π –≤–µ—Ä—Å–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –ª–∏–±–æ —É–∫–∞–∂–∏—Ç–µ
echo                             "all", —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±–µ –≤–µ—Ä—Å–∏–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ä–µ–¥–æ–π
echo                             —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Node.js –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã "osp use Node-x.x.x"
echo                             –∏ "osp add Node-x.x.x", —É–∫–∞–∑—ã–≤–∞—è –ø–æ–ª–Ω—ã–π –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º.
echo %ESC%[32mnode    list   [available]%ESC%[0m  –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π Node.js
echo                             –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ [available] –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–µ—Ä—Å–∏–π Node.js
echo %ESC%[32mnode    mode    ^<N^> [ARCH]%ESC%[0m  –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å Node.js –≤–µ—Ä—Å–∏–∏ ^<N^>
echo                             –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [ARCH] —Ä–∞–≤–Ω—ã–º 32 –∏–ª–∏ 64 –¥–ª—è —Å–º–µ–Ω—ã —Ç–µ–∫—É—â–µ–π —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç–∏
echo %ESC%[32mnode    node_mirror  [URL]%ESC%[0m  –ó–∞–¥–∞—Ç—å –∑–µ—Ä–∫–∞–ª–æ node. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: https://nodejs.org/dist/
echo                             –û—Å—Ç–∞–≤—å—Ç–µ [URL] –ø—É—Å—Ç—ã–º –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ URL-–∞–¥—Ä–µ—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
echo %ESC%[32mnode    npm_mirror   [URL]%ESC%[0m  –ó–∞–¥–∞—Ç—å –∑–µ—Ä–∫–∞–ª–æ npm. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: https://github.com/npm/cli/archive/
echo                             –û—Å—Ç–∞–≤—å—Ç–µ [URL] –ø—É—Å—Ç—ã–º –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ URL-–∞–¥—Ä–µ—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
echo %ESC%[32mnode    proxy        [URL]%ESC%[0m  –ó–∞–¥–∞—Ç—å –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ Node.js
echo                             –û—Å—Ç–∞–≤—å—Ç–µ [URL] –ø—É—Å—Ç—ã–º –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–∫—Å–∏
echo                             –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [URL] —Ä–∞–≤–Ω—ã–º "none" –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏
echo %ESC%[32mnode    uninstall ^<N^>%ESC%[0m       –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–Ω–µ–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Node.js
:help2
echo:
echo %ESC%[33m–î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã:%ESC%[0m
echo:
echo %ESC%[32maddons%ESC%[0m                      –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è—Ö
echo %ESC%[32mcacert  ^<init^|show^|deinit^>%ESC%[0m  –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å^|–ø–æ–∫–∞–∑–∞—Ç—å^|—É–¥–∞–ª–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–¶–°)
echo                             –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–æ–≤–æ–≥–æ –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∫–æ—Ä–Ω–µ–≤—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–¶–°) –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
echo %ESC%[32mconvert ^<DOMAIN^>%ESC%[0m            –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º—è –¥–æ–º–µ–Ω–∞ –∏–∑/–≤ Punycode
echo %ESC%[32mexit%ESC%[0m                        –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–æ–≥—Ä–∞–º–º—ã (—Ç–µ–∫—É—â–∞—è —Å—Ä–µ–¥–∞ –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω–∞)
echo %ESC%[32mlog     ^<PATTERN^> [N]%ESC%[0m       –ü–æ–∫–∞–∑–∞—Ç—å –∂—É—Ä–Ω–∞–ª—ã –ø–æ —Ñ–∏–ª—å—Ç—Ä—É –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É (–ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å—Ç—Ä–æ–∫)
echo                             –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤—ã–≤–æ–¥–∏–º—ã—Ö –∂—É—Ä–Ω–∞–ª–æ–≤
echo                             –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∂—É—Ä–Ω–∞–ª—ã –º–æ–¥—É–ª—è PHP-8.0: osp log php-8\.0
echo                             –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∂—É—Ä–Ω–∞–ª—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ–º–µ–Ω–∞–º: osp log domains\\(.+)_access
echo                             –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∂—É—Ä–Ω–∞–ª—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã: osp log "\\(general|api|scheduler|smtp)"
echo                             –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∂—É—Ä–Ω–∞–ª—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 15 —Å—Ç—Ä–æ–∫): osp log . 15
echo %ESC%[32mmodules%ESC%[0m                     –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–¥—É–ª—è—Ö
echo %ESC%[32mprojects%ESC%[0m                    –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–∞—Ö
echo %ESC%[32mstatus%ESC%[0m                      –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º (–∑–∞–¥–∞–Ω–∏–π, –¥–æ–º–µ–Ω–æ–≤, –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π –∏ –º–æ–¥—É–ª–µ–π)
echo %ESC%[32msysprep [silent^|ssd]%ESC%[0m        –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
echo                             –î–æ–±–∞–≤—å—Ç–µ [silent] –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º—ã –≤ —Ç–∏—Ö–æ–º —Ä–µ–∂–∏–º–µ
echo                             –§–ª–∞–≥ [ssd] –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω [silent] (–Ω–æ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥ SSD)
echo                             –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤ —Ç–∏—Ö–æ–º —Ä–µ–∂–∏–º–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –±–µ–∑ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
echo                             –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞!
echo %ESC%[32mtasks%ESC%[0m                       –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–¥–∞–Ω–∏—è—Ö –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
echo %ESC%[32mversion%ESC%[0m                     –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã
echo:
echo %ESC%[33m–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:%ESC%[0m
echo:
echo %ESC%[32mosp exit ^& ospanel%ESC%[0m          –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
echo %ESC%[32mosp use PostgreSQL-9.6%ESC%[0m      –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å—Ä–µ–¥—ã –º–æ–¥—É–ª—è PostgreSQL-9.6
echo %ESC%[32mosp on PHP-8.1 myprofile%ESC%[0m    –í–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è PHP-8.1 —Å–æ —Å–º–µ–Ω–æ–π –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∞ MyProfile
echo %ESC%[32mosp restart mysql-8.0%ESC%[0m       –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª—è MySQL-8.0 (–∏–º—è –º–æ–¥—É–ª—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –≤ –ª—é–±–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ)
echo %ESC%[32mosp reset ^& osp add bind%ESC%[0m    –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π —Å—Ä–µ–¥—ã —Å–æ —Å—Ä–µ–¥–æ–π Bind
echo:
echo %ESC%[33m–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã:%ESC%[0m
echo:
echo %ESC%[32maria2c%ESC%[0m                      –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º HTTP(S), (S)FTP –∏ BitTorrent
echo %ESC%[32mbat%ESC%[0m                         –ö–ª–æ–Ω cat (linux) —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Git
echo %ESC%[32mbrotli%ESC%[0m                      –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å–∂–∞—Ç–∏—è –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –ø–æ—Ç–µ—Ä—å —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º
echo %ESC%[32mcurl%ESC%[0m                        –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é URL-–∞–¥—Ä–µ—Å–æ–≤
echo %ESC%[32mdust%ESC%[0m                        –£—Ç–∏–ª–∏—Ç–∞ –ø–æ—Ö–æ–∂–∞—è –Ω–∞ du (linux), –Ω–æ –±–æ–ª–µ–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è!
echo %ESC%[32mfd%ESC%[0m                          –ü—Ä–æ—Å—Ç–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–ø–∏—Å–µ–π –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
echo %ESC%[32mgzip%ESC%[0m                        –£—Ç–∏–ª–∏—Ç–∞ —Å–∂–∞—Ç–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ Deflate
echo %ESC%[32mjq%ESC%[0m                          –õ—ë–≥–∫–∏–π –∏ –≥–∏–±–∫–∏–π JSON-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
echo %ESC%[32mmmdbinspect%ESC%[0m                 –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–ø–∏—Å–µ–π –≤ –æ–¥–Ω–æ–π –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö .mmdb
echo %ESC%[32msass%ESC%[0m                        Dart Sass ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä SASS/SCSS —Ñ–∞–π–ª–æ–≤
echo %ESC%[32msd%ESC%[0m                          –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –∑–∞–º–µ–Ω—ã —Ç–µ–∫—Å—Ç–∞ –≤ —Ñ–∞–π–ª–∞—Ö
echo %ESC%[32mwget%ESC%[0m                        –ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –ø–æ —Å–µ—Ç–∏
echo %ESC%[32mxh%ESC%[0m                          –£–¥–æ–±–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
goto end
:: -----------------------------------------------------------------------------------
:: SHUTTING DOWN THE APPLICATION
:: -----------------------------------------------------------------------------------
:shutdown
if not "%OSP_MODULES_LIST%"=="" for %%a in (%OSP_MODULES_LIST%) do (
if exist "%OSP_DIR%\data\cli\env_%%a.bat" call "%OSP_DIR%\data\cli\env_%%a.bat" resetenv
)
if not "%OSP_ADDONS_LIST%"=="" for %%a in (%OSP_ADDONS_LIST%) do (
if exist "%OSP_DIR%\data\cli\env_%%a.bat" call "%OSP_DIR%\data\cli\env_%%a.bat" resetenv
)
set "ALLUSERSPROFILE=C:\ProgramData"
set "APPDATA=C:\Users\maksl\AppData\Roaming"
set "CHOCOLATEYINSTALL=C:\ProgramData\chocolatey"
set "CHOCOLATEYLASTPATHUPDATE=132729729512785827"
set "COMMONPROGRAMFILES=C:\Program Files\Common Files"
set "COMMONPROGRAMFILES(X86)=C:\Program Files (x86)\Common Files"
set "COMMONPROGRAMW6432=C:\Program Files\Common Files"
set "COMPUTERNAME=GELLEN"
set "COMSPEC=C:\Windows\system32\cmd.exe"
set "DRIVERDATA=C:\Windows\System32\Drivers\DriverData"
set "FPS_BROWSER_APP_PROFILE_STRING=Internet Explorer"
set "FPS_BROWSER_USER_PROFILE_STRING=Default"
set "HOMEDRIVE=C:"
set "HOMEPATH=\Users\maksl"
set "LOCALAPPDATA=C:\Users\maksl\AppData\Local"
set "LOGONSERVER=\\GELLEN"
set "NUMBER_OF_PROCESSORS=4"
set "ONEDRIVE=C:\Users\maksl\OneDrive"
set "OS=Windows_NT"
set "PATH=E:\Server\OSPanel\bin;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\ProgramData\Oracle\Java\javapath;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\ProgramData\chocolatey\bin;C:\Program Files\dotnet\;C:\Program Files (x86)\dotnet\;C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Users\maksl\AppData\Local\Microsoft\WindowsApps;C:\Users\maksl\.dotnet\tools;C:\Users\maksl\AppData\Local\GitHubDesktop\bin"
set "PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC"
set "PROCESSOR_ARCHITECTURE=AMD64"
set "PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 158 Stepping 11, GenuineIntel"
set "PROCESSOR_LEVEL=6"
set "PROCESSOR_REVISION=9e0b"
set "PROGRAMDATA=C:\ProgramData"
set "PROGRAMFILES=C:\Program Files"
set "PROGRAMFILES(X86)=C:\Program Files (x86)"
set "PROGRAMW6432=C:\Program Files"
set "PSMODULEPATH=C:\Program Files\WindowsPowerShell\Modules;C:\Windows\system32\WindowsPowerShell\v1.0\Modules"
set "PUBLIC=C:\Users\Public"
set "SESSIONNAME=Console"
set "SYSTEMDRIVE=C:"
set "SYSTEMROOT=C:\Windows"
set "TEMP=C:\Users\maksl\AppData\Local\Temp"
set "TMP=C:\Users\maksl\AppData\Local\Temp"
set "USERDOMAIN=GELLEN"
set "USERDOMAIN_ROAMINGPROFILE=GELLEN"
set "USERNAME=maksl"
set "USERPROFILE=C:\Users\maksl"
set "WINDIR=C:\Windows"
set "OSP_ACTIVE_ENV=System" & set "OSP_ACTIVE_ENV_VAL=:System:"
if /i not "65001"=="" set "OSP_CODEPAGE=65001"
if /i not "%2"=="silent" echo: & echo –¢–µ–∫—É—â–∞—è —Å—Ä–µ–¥–∞: %ESC%[36m%OSP_ACTIVE_ENV%%ESC%[0m
TITLE %OSP_ACTIVE_ENV% ^| Open Server Panel
"%OSP_DIR%\system\bin\curl.exe" -f -s http://127.127.127.127:80/api/cmd/14DA5293F95BDE856B0D0442DAB5D8743B9A3BDC803619795CA3FABD38B221FA/exit > nul
if exist "%OSP_DIR%\temp\OSPanel.lock" goto error
if /i not "%2"=="silent" echo: & echo –†–∞–±–æ—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∞
goto end
:: -----------------------------------------------------------------------------------
:: INIT CACERT
:: -----------------------------------------------------------------------------------
:cacertinit
if "%2"=="" goto eargument
if /i "%2"=="show" "%SystemRoot%\System32\certutil.exe" -user -store "Root" "Open Server Panel" & goto end
if /i "%2"=="deinit" goto cacertdeinit
if not exist "%OSP_DIR%\system\ssl\gen_root_cert.bat" set "OSP_ERR_MSG=%OSP_DIR%\system\ssl\gen_root_cert.bat –Ω–µ –Ω–∞–π–¥–µ–Ω" & goto error
if exist "%OSP_DIR%\data\ssl\root\cert.crt" del /Q "%OSP_DIR%\data\ssl\root\cert.crt"
"%SystemRoot%\System32\certutil.exe" -user -delstore "Root" "Open Server Panel"
"%SystemRoot%\System32\certutil.exe" -urlcache * delete > nul 2> nul
call "%OSP_DIR%\system\ssl\gen_root_cert.bat"
if not exist "%OSP_DIR%\data\ssl\root\cert.crt" set "OSP_ERR_MSG=–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç" & goto error
"%SystemRoot%\System32\certutil.exe" -user -addstore "Root" "%OSP_DIR%\data\ssl\root\cert.crt"
"%SystemRoot%\System32\certutil.exe" -urlcache * delete > nul 2> nul
goto end
:: -----------------------------------------------------------------------------------
:: DEINIT CACERT
:: -----------------------------------------------------------------------------------
:cacertdeinit
if exist "%OSP_DIR%\data\ssl\root\cert.crt" del /Q "%OSP_DIR%\data\ssl\root\cert.crt"
"%SystemRoot%\System32\certutil.exe" -user -delstore "Root" "Open Server Panel"
"%SystemRoot%\System32\certutil.exe" -urlcache * delete > nul 2> nul
goto end
:: -----------------------------------------------------------------------------------
:: NODE MANAGEMENT
:: -----------------------------------------------------------------------------------
:node
if "%2"=="" goto eargument
call :strfind "%OSP_ADDONS_LIST_%" ":NVM:"
if not defined OSP_TMPVAL set "OSP_ERR_MSG=–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ NVM –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ" & goto error
if not exist "%OSP_DIR%\data\cli\env_NVM.bat" set "OSP_ERR_MSG=–ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å—Ä–µ–¥—ã –¥–ª—è NVM" & goto error
if /i "%2"=="install" goto nodeinstall
if /i "%2"=="list" goto nodelist
if /i "%2"=="mode" goto nodemode
if /i "%2"=="node_mirror" goto nodeurl
if /i "%2"=="npm_mirror" goto nodeurl
if /i "%2"=="proxy" goto nodeurl
if /i "%2"=="uninstall" goto nodeinstall
if /i "%2"=="add" goto nodeadd
if /i "%2"=="use" goto nodeuse
goto invalid
:nodeadd
if /i "%3"=="" goto invalid
set "OSP_TMP_NAME=%3"
set "OSP_TMP_NAME=%OSP_TMP_NAME:Node-=%"
if not exist "%OSP_DIR%\addons\NVM\v%OSP_TMP_NAME%" set "OSP_ERR_MSG=–¢–∞–∫–∞—è –≤–µ—Ä—Å–∏—è Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞" & goto error
call :strfind "%OSP_ACTIVE_ENV_VAL%" ":Node"
if defined OSP_TMPVAL set "OSP_ERR_MSG=–ú–æ–¥—É–ª—å —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ç–µ–∫—É—â—É—é —Å—Ä–µ–¥—É!" & goto error
call :strfind "%OSP_ACTIVE_ENV_VAL%" ":Node-%OSP_TMP_NAME%:"
if defined OSP_TMPVAL set "OSP_ERR_MSG=–¢–∞–∫–∞—è —Å—Ä–µ–¥–∞ —É–∂–µ –∞–∫—Ç–∏–≤–Ω–∞" & goto error
goto nodeenv
:nodeuse
if /i "%3"=="" goto invalid
set "OSP_TMP_NAME=%3"
set "OSP_TMP_NAME=%OSP_TMP_NAME:Node-=%"
if not exist "%OSP_DIR%\addons\NVM\v%OSP_TMP_NAME%" set "OSP_ERR_MSG=–¢–∞–∫–∞—è –≤–µ—Ä—Å–∏—è Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞" & goto error
call :env_reset post
goto nodeenv
:nodemode
if /i "%3"=="" goto invalid
set "OSP_TMP_NAME=%3"
set "OSP_TMP_NAME=%OSP_TMP_NAME:Node-=%"
if /i "%4"=="" echo: & call "%OSP_DIR%\system\bin\getbit.exe" "%OSP_DIR%\addons\NVM\v%OSP_TMP_NAME%\node.exe" & goto end
if /i not "%4"=="" if /i not "%4"=="32" if /i not "%4"=="64" goto invalid
setlocal
call :env_reset post
call "%OSP_DIR%\data\cli\env_NVM.bat" use
call "%OSP_DIR%\data\cli\nvm.bat" use %OSP_TMP_NAME% %4
endlocal
goto end
:nodeurl
setlocal
call :env_reset post
call "%OSP_DIR%\data\cli\env_NVM.bat" use
call "%OSP_DIR%\data\cli\nvm.bat" %2 %3
endlocal
goto end
:nodelist
if /i not "%3"=="" if /i not "%3"=="available" goto invalid
setlocal
call :env_reset post
call "%OSP_DIR%\data\cli\env_NVM.bat" use
call "%OSP_DIR%\data\cli\nvm.bat" %2 %3
endlocal
goto end
:nodeinstall
if /i "%3"=="" goto invalid
set "OSP_TMP_NAME=%3"
set "OSP_TMP_NAME=%OSP_TMP_NAME:Node-=%"
if /i not "%4"=="" if /i not "%4"=="all" if /i not "%4"=="32" if /i not "%4"=="64" goto invalid
setlocal
call :env_reset post
call "%OSP_DIR%\data\cli\env_NVM.bat" use
echo:
if /i "%2"=="uninstall" goto nodeuninstall
if /i "%4"=="64" goto nodeinst64
if /i "%4"=="" goto nodeinst64
:nodeinst32
call "%OSP_DIR%\data\cli\nvm.bat" install %OSP_TMP_NAME% 32
call "%OSP_DIR%\data\cli\nvm.bat" use %OSP_TMP_NAME% 32
if /i "%4"=="32" goto nodeinstallend
:nodeinst64
call "%OSP_DIR%\data\cli\nvm.bat" install %OSP_TMP_NAME% 64
call "%OSP_DIR%\data\cli\nvm.bat" use %OSP_TMP_NAME% 64
goto nodeinstallend
:nodeuninstall
call "%OSP_DIR%\data\cli\nvm.bat" uninstall %OSP_TMP_NAME%
:nodeinstallend
endlocal
"%OSP_DIR%\system\bin\curl.exe" -f -s http://127.127.127.127:80/api/cmd/14DA5293F95BDE856B0D0442DAB5D8743B9A3BDC803619795CA3FABD38B221FA/update_node >nul 2>nul
goto end
:nodeenv
call "%OSP_DIR%\data\cli\env_NVM.bat" %2 & call :post_env %2 Node-%OSP_TMP_NAME% %4
set "PATH=%OSP_DIR%\addons\NVM\v%OSP_TMP_NAME%;%PATH%"
set "NPM_CONFIG_UNICODE=true"
set "NPM_CONFIG_CAFILE=%OSP_DIR%\data\ssl\cacert.pem"
set "NPM_CONFIG_USERCONFIG=%OSP_DIR%\addons\NVM\v%OSP_TMP_NAME%\etc\user-npm.conf"
set "NPM_CONFIG_GLOBALCONFIG=%OSP_DIR%\addons\NVM\v%OSP_TMP_NAME%\etc\global-npm.conf"
set "NPM_CONFIG_CACHE=%OSP_DIR%\addons\NVM\v%OSP_TMP_NAME%\npm-cache"
set "NPM_CACHE_LOCATION=%OSP_DIR%\addons\NVM\v%OSP_TMP_NAME%\npm-cache"
goto end
:: -----------------------------------------------------------------------------------
:: SYSTEM PREPARATION TOOL
:: -----------------------------------------------------------------------------------
:sysprep
if /i not "%2"=="silent" if /i not "%2"=="ssd" if not "%2"=="" goto invalid
if /i "%2"=="silent" start "" /WAIT "%OSP_DIR%\system\bin\syspreptool.exe" /VERYSILENT /SUPPRESSMSGBOXES /NOCANCEL
if /i "%2"=="ssd" start "" /WAIT "%OSP_DIR%\system\bin\syspreptool.exe" /VERYSILENT /SUPPRESSMSGBOXES /NOCANCEL /MERGETASKS="taskSsdopts"
if "%2"=="" start "" "%OSP_DIR%\system\bin\syspreptool.exe"
goto end
:: -----------------------------------------------------------------------------------
:: LOG VIEW
:: -----------------------------------------------------------------------------------
:log
if "%~2"=="" goto eargument
echo:
"%OSP_DIR%\system\bin\fd.exe" -e log -a -i -p %2 "%OSP_DIR%\logs" -x "%OSP_DIR%\system\bin\tail.bat" {} %3
goto end
:: -----------------------------------------------------------------------------------
:: ADDONS/PROJECTS/MODULES/TASKS LIST
:: -----------------------------------------------------------------------------------
:request
"%OSP_DIR%\system\bin\curl.exe" -f -s http://127.127.127.127:80/api/cmd/14DA5293F95BDE856B0D0442DAB5D8743B9A3BDC803619795CA3FABD38B221FA/%1
if %ERRORLEVEL% gtr 0 goto error
goto end
:: -----------------------------------------------------------------------------------
:: INIT/ON/OFF/RESTART/STATUS
:: -----------------------------------------------------------------------------------
:mod_cmd
if "%1"=="status" if "%2"=="" "%OSP_DIR%\system\bin\curl.exe" -f -s http://127.127.127.127:80/api/cmd/14DA5293F95BDE856B0D0442DAB5D8743B9A3BDC803619795CA3FABD38B221FA/all
if "%1"=="status" if "%2"=="" if %ERRORLEVEL% gtr 0 goto error
if "%1"=="status" if "%2"=="" goto end
if "%2"=="" goto eargument
set "OSP_TMP_NAME=%2"
if not "%OSP_MODULES_LIST%"=="" for %%a in (%OSP_MODULES_LIST%) do (
    if /i "%%a"=="%2" set "OSP_TMP_NAME=%%a"
)
call :strfind "%OSP_MODULES_LIST_%all:" ":%OSP_TMP_NAME%:"
if not defined OSP_TMPVAL goto invalid
set "OSP_TMPVAL=%OSP_TMP_NAME%"
if /i "%OSP_TMP_NAME%"=="all" set "OSP_TMPVAL=%OSP_MODULES_LIST%"
if /i "%OSP_TMP_NAME%"=="all" if /i "%1"=="on" set "OSP_TMPVAL=%OSP_MODULES_LIST%"
if /i "%OSP_TMP_NAME%"=="all" if /i "%1"=="off" set "OSP_TMPVAL=%OSP_MODULES_LIST%"
if /i "%OSP_TMP_NAME%"=="all" if /i "%1"=="restart" set "OSP_TMPVAL=%OSP_MODULES_LIST%"
if /i "%OSP_TMP_NAME%"=="all" echo: & echo –ö–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤—Å–µ–º –º–æ–¥—É–ª—è–º! & echo –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è...
if /i "%OSP_TMP_NAME%"=="all" "%SystemRoot%\System32\choice.exe" /C YN /N /M "->–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å (Y/N)?"
if /i "%OSP_TMP_NAME%"=="all" if not %ERRORLEVEL%==1 goto end
setlocal EnableDelayedExpansion
if %ERRORLEVEL%==1 set "OSP_ERR_MSG={err_failed_to_enable_ce}" & goto error
for %%a in (%OSP_TMPVAL%) do (
    if /i "%1"=="restart" (
        "%OSP_DIR%\system\bin\curl.exe" -f -s http://127.127.127.127:80/api/cmd/14DA5293F95BDE856B0D0442DAB5D8743B9A3BDC803619795CA3FABD38B221FA/off/%%a/%3
        if !errorlevel! gtr 0 (
            call :echo_error %1 %OSP_TMP_NAME% %3
        ) else (
            "%OSP_DIR%\system\bin\curl.exe" -f -s http://127.127.127.127:80/api/cmd/14DA5293F95BDE856B0D0442DAB5D8743B9A3BDC803619795CA3FABD38B221FA/on/%%a/%3
            if !errorlevel! gtr 0 call :echo_error %1 %OSP_TMP_NAME% %3
        )
    ) else (
        "%OSP_DIR%\system\bin\curl.exe" -f -s http://127.127.127.127:80/api/cmd/14DA5293F95BDE856B0D0442DAB5D8743B9A3BDC803619795CA3FABD38B221FA/%1/%%a/%3
        if !errorlevel! gtr 0 call :echo_error %1 %OSP_TMP_NAME% %3
    )
    if !errorlevel!==0 if /i "%1"=="status" if exist "%OSP_DIR%\logs\%%a.log" for %%S in ("%OSP_DIR%\logs\%%a.log") do if not %%~zS==0 echo: & "%OSP_DIR%\system\bin\fd.exe" -e log -a -i -p %%a[\.\\A-Za-z0-9]+ "%OSP_DIR%\logs" -x "%OSP_DIR%\system\bin\tail.bat" {} 15 & echo %ESC%[0m
)
endlocal
goto end
:: -----------------------------------------------------------------------------------
:: SHELL
:: -----------------------------------------------------------------------------------
:mod_shell
if "%2"=="" goto eargument
set "OSP_TMP_NAME=%2"
if not "%OSP_MODULES_LIST%"=="" for %%a in (%OSP_MODULES_LIST%) do (
    if /i "%%a"=="%2" set "OSP_TMP_NAME=%%a"
)
call :strfind "%OSP_MODULES_LIST_%" ":%OSP_TMP_NAME%:"
if not defined OSP_TMPVAL goto invalid
if not exist "%OSP_DIR%\data\cli\shell_%OSP_TMP_NAME%.bat" set "OSP_ERR_MSG=–ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–±–æ–ª–æ—á–∫–∏ –¥–ª—è %OSP_TMP_NAME%" & goto error
setlocal
call :env_reset post
call "%OSP_DIR%\data\cli\env_%OSP_TMP_NAME%.bat" %1 %OSP_TMP_NAME% %3 & call :post_env %1 %OSP_TMP_NAME% %3
echo:
TITLE %OSP_TMP_NAME% shell ^| Open Server Panel
call "%OSP_DIR%\data\cli\shell_%OSP_TMP_NAME%.bat"
endlocal
chcp 65001 > nul
TITLE %OSP_ACTIVE_ENV% ^| Open Server Panel
goto end
:: -----------------------------------------------------------------------------------
:: IDN CONVERTER
:: -----------------------------------------------------------------------------------
:convert
if "%2"=="" goto eargument
"%OSP_DIR%\system\bin\curl.exe" -f -s http://127.127.127.127:80/api/cmd/14DA5293F95BDE856B0D0442DAB5D8743B9A3BDC803619795CA3FABD38B221FA/convert/%2
if %ERRORLEVEL% gtr 0 goto error
@goto end
:: -----------------------------------------------------------------------------------
:: PROJECT
:: -----------------------------------------------------------------------------------
:project
if "%2"=="" goto eargument
if /i "%3"=="start" if not exist "%OSP_DIR%\data\cli\start_%2.bat" set "OSP_ERR_MSG=–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è %2" & goto error
if not exist "%OSP_DIR%\data\cli\projects_data.bat" set "OSP_ERR_MSG=–ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å—Ä–µ–¥—ã –¥–ª—è %2" & goto error
set "OSP_PROJECT_ADDED="
set "OSP_PROJECT_DIR="
set "OSP_PROJECT_ENV="
set "OSP_PROJECT_ENV_="
set "OSP_PROJECT_PATH="
call "%OSP_DIR%\data\cli\projects_data.bat" %2
if not defined OSP_PROJECT_DIR set "OSP_ERR_MSG=–ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å—Ä–µ–¥—ã –¥–ª—è %2" & goto error
call :env_reset pre
set "OSP_ACTIVE_ENV=System" & set "OSP_ACTIVE_ENV_VAL=:System:"
if /i not "65001"=="" set "OSP_CODEPAGE=65001"
set "OSP_TMP_CODEPAGE=%OSP_CODEPAGE%"
set "OSP_TMP_ECHO_STATE=%OSP_ECHO_STATE%"
call :strfind "%OSP_PROJECT_ENV_%" ":System:"
if defined OSP_TMPVAL set "OSP_PROJECT_ADDED=Added"
if not "%OSP_PROJECT_ENV%"=="" for %%a in (%OSP_PROJECT_ENV%) do (
    if not defined OSP_PROJECT_ADDED if /i not "%%a"=="system" call osp use %%a silent
    if defined OSP_PROJECT_ADDED if /i not "%%a"=="system" call osp add %%a silent
    if not defined OSP_PROJECT_ADDED set "OSP_ENV_LIST=Added"
)
if not "%OSP_PROJECT_DIR%"=="" cd /d "%OSP_PROJECT_DIR%"
if not "%OSP_PROJECT_PATH%"=="" set "PATH=%OSP_PROJECT_PATH%%PATH%"
set "OSP_ACTIVE_ENV=%2 ^| %OSP_ACTIVE_ENV%"
if "%3"=="" echo: & echo –¢–µ–∫—É—â–∞—è —Å—Ä–µ–¥–∞: %ESC%[36m%OSP_ACTIVE_ENV%%ESC%[0m
TITLE %OSP_ACTIVE_ENV% ^| Open Server Panel
if defined OSP_TMP_CODEPAGE set "OSP_CODEPAGE=%OSP_TMP_CODEPAGE%" & set "OSP_TMP_CODEPAGE="
if defined OSP_TMP_ECHO_STATE set "OSP_ECHO_STATE=%OSP_TMP_ECHO_STATE%" & set "OSP_TMP_ECHO_STATE="
set "OSP_PROJECT_ADDED="
set "OSP_PROJECT_DIR="
set "OSP_PROJECT_ENV="
set "OSP_PROJECT_ENV_="
set "OSP_PROJECT_PATH="
if /i "%3"=="start" set "OSP_PROJECT_CMD=YES" & set "OSP_PROJECT_START=%2"
goto end
:: -----------------------------------------------------------------------------------
:: MODULE ENVIRONMENT (ADD)
:: -----------------------------------------------------------------------------------
:env_add
if "%2"=="" goto eargument
call :strfind "%2" "Node-"
if defined OSP_TMPVAL call :nodeadd node add %2 %3 & goto end
call :strfind "%2" "Python-"
if defined OSP_TMPVAL call :pythonadd python add %2 %3 & goto end
set "OSP_TMPVAL="
set "OSP_TMP_NAME=%2"
if not "%OSP_ADDONS_LIST%"=="" for %%a in (%OSP_ADDONS_LIST%) do (
    if /i "%%a"=="%2" set "OSP_TMP_NAME=%%a"
)
if not "%OSP_MODULES_LIST%"=="" for %%a in (%OSP_MODULES_LIST%) do (
    if /i "%%a"=="%2" set "OSP_TMP_NAME=%%a"
)
call :strfind "%OSP_ADDONS_LIST_%" ":%OSP_TMP_NAME%:"
if not defined OSP_TMPVAL call :strfind "%OSP_MODULES_LIST_%" ":%OSP_TMP_NAME%:"
if not defined OSP_TMPVAL goto invalid
for /f "delims=-" %%i in ("%OSP_TMP_NAME%") do set "OSP_TMPVAL=%%~i"
call :strfind "%OSP_ACTIVE_ENV_VAL%" ":%OSP_TMPVAL%"
if defined OSP_TMPVAL set "OSP_ERR_MSG=–ú–æ–¥—É–ª—å —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ç–µ–∫—É—â—É—é —Å—Ä–µ–¥—É!" & goto error
call :strfind "%OSP_ACTIVE_ENV_VAL%" ":%OSP_TMP_NAME%:"
if defined OSP_TMPVAL set "OSP_ERR_MSG=–¢–∞–∫–∞—è —Å—Ä–µ–¥–∞ —É–∂–µ –∞–∫—Ç–∏–≤–Ω–∞" & goto error
if not exist "%OSP_DIR%\data\cli\env_%OSP_TMP_NAME%.bat" set "OSP_ERR_MSG=–ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å—Ä–µ–¥—ã –¥–ª—è %OSP_TMP_NAME%" & goto error
call "%OSP_DIR%\data\cli\env_%OSP_TMP_NAME%.bat" %1 %OSP_TMP_NAME% %3 & call :post_env %1 %OSP_TMP_NAME% %3
goto end
:: -----------------------------------------------------------------------------------
:: MODULE ENVIRONMENT (USE)
:: -----------------------------------------------------------------------------------
:env_set
if "%2"=="" goto eargument
call :strfind "%2" "Node-"
if defined OSP_TMPVAL call :nodeuse node use %2 %3 & goto end
call :strfind "%2" "Python-"
if defined OSP_TMPVAL call :pythonuse python use %2 %3 & goto end
set "OSP_TMP_NAME=%2"
if not "%OSP_ADDONS_LIST%"=="" for %%a in (%OSP_ADDONS_LIST%) do (
    if /i "%%a"=="%2" set "OSP_TMP_NAME=%%a"
)
if not "%OSP_MODULES_LIST%"=="" for %%a in (%OSP_MODULES_LIST%) do (
    if /i "%%a"=="%2" set "OSP_TMP_NAME=%%a"
)
call :strfind "%OSP_ADDONS_LIST_%" ":%OSP_TMP_NAME%:"
if not defined OSP_TMPVAL call :strfind "%OSP_MODULES_LIST_%" ":%OSP_TMP_NAME%:"
if not defined OSP_TMPVAL goto invalid
if /i not "65001"=="" set "OSP_CODEPAGE=65001"
if not exist "%OSP_DIR%\data\cli\env_%OSP_TMP_NAME%.bat" set "OSP_ERR_MSG=–ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å—Ä–µ–¥—ã –¥–ª—è %OSP_TMP_NAME%" & goto error
call :env_reset post
call "%OSP_DIR%\data\cli\env_%OSP_TMP_NAME%.bat" %1 %OSP_TMP_NAME% %3 & call :post_env %1 %OSP_TMP_NAME% %3
goto end
:: -----------------------------------------------------------------------------------
:: DEFAULT SYSTEM ENVIRONMENT
:: -----------------------------------------------------------------------------------
:env_windows
call :env_reset pre
set "OSP_ACTIVE_ENV=System" & set "OSP_ACTIVE_ENV_VAL=:System:"
if /i not "65001"=="" set "OSP_CODEPAGE=65001"
if /i "%2"=="init" if /i not "%3"=="silent" call :logo
if /i not "%2"=="silent" if /i not "%3"=="silent" if /i not "%3"=="noprint" echo: & echo –¢–µ–∫—É—â–∞—è —Å—Ä–µ–¥–∞: %ESC%[36m%OSP_ACTIVE_ENV%%ESC%[0m
TITLE %OSP_ACTIVE_ENV% ^| Open Server Panel
goto end
:: -----------------------------------------------------------------------------------
:: RESET ENVIRONMENT
:: -----------------------------------------------------------------------------------
:env_reset
if /i "%1"=="pre" if not "%OSP_MODULES_LIST%"=="" for %%a in (%OSP_MODULES_LIST%) do (
if exist "%OSP_DIR%\data\cli\env_%%a.bat" call "%OSP_DIR%\data\cli\env_%%a.bat" resetenv
)
if /i "%1"=="pre" if not "%OSP_ADDONS_LIST%"=="" for %%a in (%OSP_ADDONS_LIST%) do (
if exist "%OSP_DIR%\data\cli\env_%%a.bat" call "%OSP_DIR%\data\cli\env_%%a.bat" resetenv
)
set "ALLUSERSPROFILE=C:\ProgramData"
set "APPDATA=C:\Users\maksl\AppData\Roaming"
set "CHOCOLATEYINSTALL=C:\ProgramData\chocolatey"
set "CHOCOLATEYLASTPATHUPDATE=132729729512785827"
set "COMMONPROGRAMFILES=C:\Program Files\Common Files"
set "COMMONPROGRAMFILES(X86)=C:\Program Files (x86)\Common Files"
set "COMMONPROGRAMW6432=C:\Program Files\Common Files"
set "COMPUTERNAME=GELLEN"
set "COMSPEC=C:\Windows\system32\cmd.exe"
set "DRIVERDATA=C:\Windows\System32\Drivers\DriverData"
set "FPS_BROWSER_APP_PROFILE_STRING=Internet Explorer"
set "FPS_BROWSER_USER_PROFILE_STRING=Default"
set "HOMEDRIVE=C:"
set "HOMEPATH=\Users\maksl"
set "LOCALAPPDATA=C:\Users\maksl\AppData\Local"
set "LOGONSERVER=\\GELLEN"
set "NUMBER_OF_PROCESSORS=4"
set "ONEDRIVE=C:\Users\maksl\OneDrive"
set "OS=Windows_NT"
set "PATH=E:\Server\OSPanel\bin;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\ProgramData\Oracle\Java\javapath;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\ProgramData\chocolatey\bin;C:\Program Files\dotnet\;C:\Program Files (x86)\dotnet\;C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Users\maksl\AppData\Local\Microsoft\WindowsApps;C:\Users\maksl\.dotnet\tools;C:\Users\maksl\AppData\Local\GitHubDesktop\bin"
set "PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC"
set "PROCESSOR_ARCHITECTURE=AMD64"
set "PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 158 Stepping 11, GenuineIntel"
set "PROCESSOR_LEVEL=6"
set "PROCESSOR_REVISION=9e0b"
set "PROGRAMDATA=C:\ProgramData"
set "PROGRAMFILES=C:\Program Files"
set "PROGRAMFILES(X86)=C:\Program Files (x86)"
set "PROGRAMW6432=C:\Program Files"
set "PSMODULEPATH=C:\Program Files\WindowsPowerShell\Modules;C:\Windows\system32\WindowsPowerShell\v1.0\Modules"
set "PUBLIC=C:\Users\Public"
set "SESSIONNAME=Console"
set "SYSTEMDRIVE=C:"
set "SYSTEMROOT=C:\Windows"
set "TEMP=C:\Users\maksl\AppData\Local\Temp"
set "TMP=C:\Users\maksl\AppData\Local\Temp"
set "USERDOMAIN=GELLEN"
set "USERDOMAIN_ROAMINGPROFILE=GELLEN"
set "USERNAME=maksl"
set "USERPROFILE=C:\Users\maksl"
set "WINDIR=C:\Windows"
if /i "%1"=="post" if not "%OSP_MODULES_LIST%"=="" for %%a in (%OSP_MODULES_LIST%) do (
if exist "%OSP_DIR%\data\cli\env_%%a.bat" call "%OSP_DIR%\data\cli\env_%%a.bat" resetenv
)
if /i "%1"=="post" if not "%OSP_ADDONS_LIST%"=="" for %%a in (%OSP_ADDONS_LIST%) do (
if exist "%OSP_DIR%\data\cli\env_%%a.bat" call "%OSP_DIR%\data\cli\env_%%a.bat" resetenv
)
set "ESC="
exit /b 0
:: -----------------------------------------------------------------------------------
:: MISCELLANEOUS FUNCTIONS
:: -----------------------------------------------------------------------------------
:invalid
set "OSP_ERR_MSG=–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã" & goto error
:eargument
set "OSP_ERR_MSG=–ù–µ –∑–∞–¥–∞–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã" & goto error
:strfind
setlocal
set "pos="
set "str=%~1"
set "sub=%~2"
call set "Replaced=%%str:%sub%=%%"
if /i not "%str%"=="%Replaced%" set "pos=yes"
endlocal & set "OSP_TMPVAL=%pos%"
exit /b 0
:trim
@set %2=%1
@exit /b 0
:post_env
if /i not "%1"=="add" set "OSP_ACTIVE_ENV=%2" & set "OSP_ACTIVE_ENV_VAL=:%2:"
if /i "%1"=="add" set "OSP_ACTIVE_ENV=%OSP_ACTIVE_ENV% + %2" & set "OSP_ACTIVE_ENV_VAL=%OSP_ACTIVE_ENV_VAL%:%2:"
set "OSP_TMP_NAME_2=" & set "OSP_TMPVAL="
if not "%OSP_MODULES_LIST%"=="" for %%a in (%OSP_MODULES_LIST%) do (
    if /i "%%a"=="%2" set "OSP_TMP_NAME_2=%%a"
)
if defined OSP_TMP_NAME_2 call :strfind "%OSP_MODULES_LIST_%" ":%OSP_TMP_NAME_2%:"
set "OSP_TMP_NAME_2="
if defined OSP_TMPVAL if not exist "%OSP_DIR%\temp\%2.lock" echo: & echo %ESC%[93m–ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï: %2 —Å–µ–π—á–∞—Å –≤—ã–∫–ª—é—á–µ–Ω!%ESC%[0m
if /i not "%1"=="shell" if /i not "%3"=="silent" echo: & echo –¢–µ–∫—É—â–∞—è —Å—Ä–µ–¥–∞: %ESC%[36m%OSP_ACTIVE_ENV%%ESC%[0m
if /i not "%1"=="shell" TITLE %OSP_ACTIVE_ENV% ^| Open Server Panel
@exit /b 0
:: -----------------------------------------------------------------------------------
:: EXIT
:: -----------------------------------------------------------------------------------
:before_exit
@if defined OSP_CODEPAGE @chcp %OSP_CODEPAGE% > nul
@if defined OSP_ECHO_STATE @echo %OSP_ECHO_STATE%
@set "OSP_CODEPAGE="
@set "OSP_DIR="
@set "OSP_MODULES_LIST="
@set "OSP_MODULES_LIST_="
@set "OSP_ADDONS_LIST="
@set "OSP_ADDONS_LIST_="
@set "OSP_ECHO_STATE="
@set "OSP_PROG_LIST="
@set "OSP_ERR_MSG="
@set "OSP_TMPVAL="
@set "OSP_TMP_NAME="
@exit /b 0
:notrunning
@echo:
@echo %ESC%[91m–û–®–ò–ë–ö–ê
@echo ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
@echo –ö–æ–º–∞–Ω–¥–∞: osp %1 %2 %3
@echo –°–æ–æ–±—â–µ–Ω–∏–µ: –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
@echo –ü—Ä–∏—á–∏–Ω–∞: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å Open Server Panel%ESC%[0m
@if defined OSP_CODEPAGE @chcp %OSP_CODEPAGE% > nul
@set "OSP_CODEPAGE="
@exit /b 1
:end
@call :before_exit
@if defined OSP_PROJECT_CMD @goto start
@exit /b 0
:echo_error
@echo:
@echo %ESC%[91m–û–®–ò–ë–ö–ê
@echo ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
@echo –ö–æ–º–∞–Ω–¥–∞: osp %1 %2 %3
@echo –°–æ–æ–±—â–µ–Ω–∏–µ: –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É%ESC%[0m
@exit /b 1
:error
@echo:
@echo %ESC%[91m–û–®–ò–ë–ö–ê
@echo ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
@echo –ö–æ–º–∞–Ω–¥–∞: osp %1 %2 %3
@if not defined OSP_ERR_MSG @echo –°–æ–æ–±—â–µ–Ω–∏–µ: –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É%ESC%[0m
@if defined OSP_ERR_MSG @echo –°–æ–æ–±—â–µ–Ω–∏–µ: –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
@if defined OSP_ERR_MSG @echo –ü—Ä–∏—á–∏–Ω–∞: %OSP_ERR_MSG%%ESC%[0m
@call :before_exit
@exit /b 1
:start
@set "OSP_PROJECT_CMD="
@echo:
@"%OSP_DIR%\data\cli\start_%OSP_PROJECT_START%.bat"
@exit /b %ERRORLEVEL%
